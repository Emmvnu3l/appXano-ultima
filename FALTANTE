Resumen General

- El proyecto cumple parcialmente la rúbrica. Tiene autenticación básica, sesión persistente con SharedPreferences , Retrofit, ViewBinding, RecyclerView y subida múltiple de imágenes. Falta el carrito, el flujo de pago simulado, gestión de órdenes/pagos en Admin y la gestión de usuarios (bloquear/desbloquear), además de ocultar controles según rol y la redirección por rol.
Cumplimiento por Sección

- Autenticación y Sesión
  - Login y persistencia de sesión: implementado en app/src/main/java/com/example/myapplication/ui/MainActivity.kt:19 con TokenManager ( app/src/main/java/com/example/myapplication/api/TokenManager.kt:5 ).
  - Logout: implementado y limpia preferencias en app/src/main/java/com/example/myapplication/ui/LogoutActivity.kt:74 .
  - Redirección por rol: no está implementada; tras login navega a HomeActivity sin discriminar rol ( app/src/main/java/com/example/myapplication/ui/MainActivity.kt:104 ).
  - Recupero del rol desde /auth/me : implementado ( app/src/main/java/com/example/myapplication/ui/MainActivity.kt:77 ), pero no se usa para ruteo/visibilidad.
- Vista Admin
  - Productos: listar ( ProductService.getProducts en app/src/main/java/com/example/myapplication/api/ProductService.kt:12 ) y crear con múltiples imágenes ( AddProductFragment en app/src/main/java/com/example/myapplication/ui/AddProductFragment.kt:99 + UploadService en app/src/main/java/com/example/myapplication/api/UploadService.kt:10 + mapeo a ImagePayload en app/src/main/java/com/example/myapplication/ui/AddProductFragment.kt:177 ). Buscar: sí (header en ProductAdapter con filtro, app/src/main/java/com/example/myapplication/ui/ProductAdapter.kt:83 ). Editar y borrar: no.
  - Categorías: crear y listar ( CategoryService app/src/main/java/com/example/myapplication/api/CategoryService.kt:10 ), UI en CreateCategoryFragment .
  - Usuarios (listar/buscar/editar/bloquear): no implementado.
  - Pagos/Órdenes (pendientes, aceptar/rechazar, enviado): no implementado.
- Vista Cliente
  - Catálogo: listar/buscar implementado en ProductsFragment y ProductAdapter ( app/src/main/java/com/example/myapplication/ui/ProductsFragment.kt:53 , app/src/main/java/com/example/myapplication/ui/ProductAdapter.kt:83 ).
  - Carrito: no implementado; el botón “Añadir al carrito” abre pantalla de admin ( NavigationHelper.openAddProduct en app/src/main/java/com/example/myapplication/ui/ProductAdapter.kt:146 ).
  - Pago simulado y solicitud de envío: no implementado.
  - Perfil: ver datos implementado ( app/src/main/java/com/example/myapplication/ui/ProfileFragment.kt:33 ), edición de datos: no implementado.
- Requisitos Técnicos
  - Kotlin + XML: correcto en UI, pero Compose está habilitado en build ( app/build.gradle.kts:45,48,73–79 ), lo que incumple “no Compose”.
  - ViewBinding: habilitado ( app/build.gradle.kts:45 ) y usado.
  - Retrofit + Interceptor: implementado ( app/src/main/java/com/example/myapplication/api/RetrofitClient.kt:48 , app/src/main/java/com/example/myapplication/api/AuthInterceptor.kt:8 ).
  - RecyclerView: implementado ( ProductAdapter , ImageViewerDialogFragment usando ViewPager2 ).
  - Ícono app: presente ( res/mipmap-*/ic_launcher.* ).
  - Manejo de errores y validaciones: básicas en registro y listados ( RegisterActivity , ProductsFragment ). Falta estandarización y confirmaciones en operaciones destructivas.
  - Recursos (strings/colores/dimensiones): hay muchos hardcodes; strings.xml es mínimo ( app/src/main/res/values/strings.xml:2 ), incumple “sin hardcode”.
- Backend y README
  - Backend: URLs de Xano configuradas en BuildConfig ( app/build.gradle.kts:25–27 ), subida de imágenes y servicios separados por base URL ( ApiConfig ).
  - README: existe ( README.md ), pero no documenta pasos de backend, URLs necesarias, usuarios de prueba ni almacenamiento de imágenes según la rúbrica.
Criterios de Aceptación (QA rápido)

- Redirección por rol: no.
- Logout elimina sesión: sí ( LogoutActivity.kt:74–79 ).
- Subir ≥2 imágenes por producto y verlas: sí (AddProduct + visor de imágenes ImageViewerDialogFragment ).
- Carrito persistente y editable: no.
- “Pago” deja registro gestionable por Admin: no.
- Estados de pedido: pendiente → aceptado/rechazado → enviado: no.
- Sin secretos expuestos: base URLs en BuildConfig ; aceptable, pero reforzar documentación.
- APK arranca y navega: hay app-debug.apk en app/build6/outputs/apk/debug/ , navegación básica funciona.
Mejoras Paso a Paso

- Ruteo y Visibilidad por Rol
  - Añadir ruteo por rol tras login: si TokenManager.isAdmin() abrir vista admin; si no, vista cliente. Punto de entrada: app/src/main/java/com/example/myapplication/ui/MainActivity.kt:104 .
  - Ocultar ítems admin en HomeActivity según rol y tiempo de vida: al crear, consultar rol y ocultar nav_add_product y nav_create_category para user ( app/src/main/java/com/example/myapplication/ui/HomeActivity.kt:62 ).
  - En NavigationHelper , validar rol antes de abrir pantallas admin ( app/src/main/java/com/example/myapplication/ui/NavigationHelper.kt:8 ).
- Carrito Cliente
  - Crear CartManager con SharedPreferences para persistencia de sesión, operaciones: add/update/remove, total.
  - Implementar CartFragment con RecyclerView y edición de cantidades; botón de “Pagar (simulado)”.
  - Conectar “Añadir al carrito” desde ProductAdapter y ProductDetailActivity para usar CartManager en vez de abrir pantallas admin ( app/src/main/java/com/example/myapplication/ui/ProductAdapter.kt:146 , app/src/main/java/com/example/myapplication/ui/ProductDetailActivity.kt:97 ).
- Pago Simulado y Solicitud de Envío
  - Crear OrderService y modelos ( Order , CreateOrderRequest ) apuntando a Xano.
  - Implementar CheckoutActivity que cree orden con estado pendiente y registre el “pago” simulado; tras confirmar, “solicitar envío” actualiza estado.
- Gestión de Órdenes (Admin)
  - Crear OrdersFragment con listado de órdenes pendientes y acciones: aceptar ⇒ aceptado , rechazar ⇒ rechazado , y marcar enviado (flujo completo).
  - Añadir endpoints en OrderService para cambio de estado.
- Gestión de Usuarios (Admin)
  - Crear UserService (listar/buscar/editar/bloquear/desbloquear).
  - Implementar UsersFragment con RecyclerView, búsqueda y un switch/toggle de bloqueo.
- CRUD de Productos (completar)
  - Añadir update y delete en ProductService ; UI de edición en AddProductFragment /nueva EditProductFragment .
  - Confirmación en operaciones destructivas (diálogo) para cumplir UX.
- Estados de UI
  - Estandarizar estados cargando/vacío/error con vistas reutilizables en ProductsFragment , UsersFragment , OrdersFragment . Referencia actual: ProductsFragment ya maneja algunos ( app/src/main/java/com/example/myapplication/ui/ProductsFragment.kt:103 ).
- Recursos de UI
  - Extraer strings hardcodeados a strings.xml y colores/dimens a recursos. Ejemplos: textos en activity_product_detail.xml:125 , item_product.xml:41 y toasts en actividades/fragments.
- Configuración Técnica
  - Desactivar Compose para cumplir “no Compose”: quitar buildFeatures.compose = true y dependencias Compose ( app/build.gradle.kts:48,73–79 ).
  - Mantener interceptores y timeouts; agregar manejo de errores común (p. ej., parse de error body).
- README de Entrega
  - Documentar paso a paso: configuración Android y backend (Xano), variables/URLs ( AUTH_BASE_URL , STORE_BASE_URL ), usuarios de prueba (admin/cliente), almacenamiento de imágenes y cómo inicializar tablas.
  - Incluir colección de pruebas API (opcional).
- Flujo de Demo
  - Preparar el flujo completo: Admin (crear/editar producto con imágenes, bloquear usuario, revisar y aceptar/rechazar órdenes y marcar enviado) → Logout → Cliente (catálogo, carrito editable, pago simulado, solicitar envío, ver estado, editar perfil) → Logout.
Prioridades Sugeridas

- Alta: ruteo/visibilidad por rol, carrito y checkout simulado, órdenes admin, desactivar Compose.
- Media: gestión de usuarios admin, CRUD de productos (editar/borrar), estados de UI y confirmaciones.
- Baja: extracción de recursos UI, README completo y pulido de UX.
Si quieres, puedo empezar a implementar el ruteo por rol y el carrito con persistencia en SharedPreferences de forma incremental, y dejar los endpoints de órdenes/usuarios listos para Xano.

Completed

@ Chat